<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Curiosity: receiver/TrackingAlgos.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Curiosity
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_6ffb3d6210eba8e76235cad1b41a9b7e.html">receiver</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">TrackingAlgos.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="TrackingAlgos_8h_source.html">TrackingAlgos.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Debug_8h_source.html">Debug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ExitConditions_8h_source.html">ExitConditions.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Motors_8h_source.html">Motors.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Timer_8h_source.html">Timer.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for TrackingAlgos.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="TrackingAlgos_8cpp__incl.png" border="0" usemap="#receiver_2TrackingAlgos_8cpp" alt=""/></div>
<map name="receiver_2TrackingAlgos_8cpp" id="receiver_2TrackingAlgos_8cpp">
<area shape="rect" id="node2" href="TrackingAlgos_8h.html" title="TrackingAlgos.h" alt="" coords="5,155,121,181"/>
<area shape="rect" id="node4" href="Debug_8h.html" title="Debug.h" alt="" coords="69,80,140,107"/>
<area shape="rect" id="node5" href="ExitConditions_8h.html" title="ExitConditions.h" alt="" coords="165,80,282,107"/>
<area shape="rect" id="node8" href="Motors_8h.html" title="Motors.h" alt="" coords="281,229,355,256"/>
<area shape="rect" id="node9" href="Timer_8h.html" title="Timer.h" alt="" coords="358,155,425,181"/>
<area shape="rect" id="node6" href="GeneralIo_8h.html" title="GeneralIo.h" alt="" coords="177,155,267,181"/>
<area shape="rect" id="node7" href="Config_8h.html" title="Config.h" alt="" coords="187,229,257,256"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aae81136ac7816e0cbe6402f4477f689d"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="TrackingAlgos_8cpp.html#aae81136ac7816e0cbe6402f4477f689d">followLine</a> (int16_t speed, uint8_t initialTurnDifference, uint8_t maxTurnDifference, uint8_t msTurnCorrectionDelay, bool useEdgeSensors, bool(*exitConditionFunction)(), bool canOnlyTurnRight)</td></tr>
<tr class="separator:aae81136ac7816e0cbe6402f4477f689d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bc403c09c873559c2979e5f8856166e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="TrackingAlgos_8cpp.html#a8bc403c09c873559c2979e5f8856166e">followRectangle</a> ()</td></tr>
<tr class="separator:a8bc403c09c873559c2979e5f8856166e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81af9652c37853efbc63e6c94afc8da4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="TrackingAlgos_8cpp.html#a81af9652c37853efbc63e6c94afc8da4">followCorner</a> (bool turnClockwise)</td></tr>
<tr class="separator:a81af9652c37853efbc63e6c94afc8da4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ba3fc779cba38b8d55d49d6d77ec156"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="TrackingAlgos_8cpp.html#a4ba3fc779cba38b8d55d49d6d77ec156">waitUntilSensorDetectsLine</a> (uint8_t sensorIndex, bool preferExactMatch)</td></tr>
<tr class="separator:a4ba3fc779cba38b8d55d49d6d77ec156"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions defining the behavior of the robot when following a path</p>
<dl class="section author"><dt>Author</dt><dd>Misha Krieger-Raynauld (1952515), Simon Gauvin (1951457), Vlad Drelciuc (1941366), Nicolas Charron (1960356) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2019-03-22 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a81af9652c37853efbc63e6c94afc8da4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81af9652c37853efbc63e6c94afc8da4">&#9670;&nbsp;</a></span>followCorner()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void followCorner </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>turnClockwise</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Algorithm for taking a sharp corner </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">turnCounterclockwise</td><td>The direction of the turn </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aae81136ac7816e0cbe6402f4477f689d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae81136ac7816e0cbe6402f4477f689d">&#9670;&nbsp;</a></span>followLine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t followLine </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>initialTurnDifference</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>maxTurnDifference</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>turnCorrectionDelay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useEdgeSensors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool(*)()&#160;</td>
          <td class="paramname"><em>exitConditionFunction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>canOnlyTurnRight</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Algorithm for following a line. This function will block and return when stopCondition returns true </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">speed</td><td>The speed at which the robot must follow the line </td></tr>
    <tr><td class="paramname">initialTurnDifference</td><td>The initial value at which the appropriate wheel slows down when the robot must correct itself </td></tr>
    <tr><td class="paramname">maxTurnDifference</td><td>The maximum value at which the appropriate wheel slows down when the robot must correct itself If this parameter is equal or lower than initialTurnDifference, no progressive turning will take place </td></tr>
    <tr><td class="paramname">turnCorrectionDelay</td><td>The delay between each read of the sensors. This will also affect the speed at which the progressive turning increases. </td></tr>
    <tr><td class="paramname">useEdgeSensors</td><td>Use edges sensors for tracking the line. If this parameter is true, the robot will block the appropriate wheel to quickly go back on track. </td></tr>
    <tr><td class="paramname">exitConditionFunction</td><td>A pointer to a function returning a bool. This function passed as param must contain the logic to determine when the algorithm ends. </td></tr>
    <tr><td class="paramname">canOnlyTurnRight</td><td>Tells the function if the robot is only allowed to turn right. Useful for S2 second curve end detection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The time in milliseconds the robot followed the line </dd></dl>

</div>
</div>
<a id="a8bc403c09c873559c2979e5f8856166e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bc403c09c873559c2979e5f8856166e">&#9670;&nbsp;</a></span>followRectangle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void followRectangle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Algorithm for staying inside a rectangle. Blocks until rectangle has been left by checking if both edge sensors are on black. Useful for section 4 </p>

</div>
</div>
<a id="a4ba3fc779cba38b8d55d49d6d77ec156"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ba3fc779cba38b8d55d49d6d77ec156">&#9670;&nbsp;</a></span>waitUntilSensorDetectsLine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void waitUntilSensorDetectsLine </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>sensorIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>preferExactMatch</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Block the execution of the program until the desired sensor detects a line </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensorIndex</td><td>The index of the sensor which has to hit a line, indexed from 0 </td></tr>
    <tr><td class="paramname">preferExactMatch</td><td>If true, the function will wait for the match to be exact and prefer to exit then. However, if the sensor number did at some point detect black but the exact match never happened and the sensor number is now no longer on black, the function will return true at that moment. Warning: this may cause undesirable overshoot for edge sensors. Useful for following corners. Default value is false </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
